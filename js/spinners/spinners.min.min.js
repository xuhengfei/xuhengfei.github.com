/*!
 * Spinners 3.0.0
 * (c) 2010-2012 Nick Stakenburg - http://www.nickstakenburg.com
 *
 * Spinners is freely distributable under the terms of an MIT-style license.
 *
 * GitHub: http://github.com/staaky/spinners
 */var Spinners={version:"3.0.0"};(function(e){function t(e){return e*Math.PI/180}function n(e){this.element=e}function r(t,n){t&&(this.element=t,u.remove(t),u.removeDetached(),this._position=0,this._state="stopped",this.setOptions(e.extend({color:"#000",dashes:12,radius:5,height:5,width:1.8,opacity:1,padding:3,rotation:700},n||{})),this.drawPosition(0),u.add(this))}var i={scroll:function(e,t){if(!t)return e;var n=e.slice(0,t);return e.slice(t,e.length).concat(n)},isElement:function(e){return e&&1==e.nodeType},element:{isAttached:function(){return function(e){for(;e&&e.parentNode;)e=e.parentNode;return!!e&&!!e.body}}()}},s={drawRoundedRectangle:function(n,r){var i=e.extend({top:0,left:0,width:0,height:0,radius:0},r||{}),s=i.left,o=i.top,u=i.width,f=i.height,i=i.radius;n.beginPath(),n.moveTo(s+i,o),n.arc(s+u-i,o+i,i,t(-90),t(0),!1),n.arc(s+u-i,o+f-i,i,t(0),t(90),!1),n.arc(s+i,o+f-i,i,t(90),t(180),!1),n.arc(s+i,o+i,i,t(-180),t(-90),!1),n.closePath(),n.fill()}},o=function(){function e(e){var n=[];0==e.indexOf("#")&&(e=e.substring(1)),e=e.toLowerCase();if(""!=e.replace(t,""))return null;3==e.length?(n[0]=e.charAt(0)+e.charAt(0),n[1]=e.charAt(1)+e.charAt(1),n[2]=e.charAt(2)+e.charAt(2)):(n[0]=e.substring(0,2),n[1]=e.substring(2,4),n[2]=e.substring(4));for(e=0;e<n.length;e++)n[e]=parseInt(n[e],16);return n.red=n[0],n.green=n[1],n.blue=n[2],n}var t=RegExp("[0123456789abcdef]","g"),n=function(){function e(e,t,n){return e=e.toString(n||10),Array(t-e.length).join("0")+e}return function(t,n,r){return"#"+e(t,2,16)+e(n,2,16)+e(r,2,16)}}();return{hex2rgb:e,hex2fill:function(t,n){"undefined"==typeof n&&(n=1);var r=n,i=e(t);return i[3]=r,i.opacity=r,"rgba("+i.join()+")"},rgb2hex:n}}();e.extend(Spinners,{enabled:!1,support:{canvas:function(){var t=e("<canvas>")[0];return!!t.getContext&&!!t.getContext("2d")}()},init:function(){if(this.support.canvas||window.G_vmlCanvasManager&&window.attachEvent&&-1===navigator.userAgent.indexOf("Opera"))window.G_vmlCanvasManager&&window.G_vmlCanvasManager.init_(document),this.enabled=!0},create:function(e,t){return n.create(e,t),this.get(e)},get:function(e){return new n(e)},play:function(e){return this.get(e).play(),this},pause:function(e){return this.get(e).pause(),this},toggle:function(e){return this.get(e).toggle(),this},stop:function(e){return this.get(e).stop(),this},remove:function(e){return this.get(e).remove(),this},removeDetached:function(){return u.removeDetached(),this},center:function(e){return this.get(e).center(),this},setOptions:function(e,t){return this.get(e).setOptions(t),this},getDimensions:function(e){return e=2*u.get(e)[0].getLayout().workspace.radius,{width:e,height:e}}});var u={spinners:[],get:function(t){if(t){var n=[];return e.each(this.spinners,function(r,s){s&&(i.isElement(t)?s.element==t:e(s.element).is(t))&&n.push(s)}),n}},add:function(e){this.spinners.push(e)},remove:function(t){e(e.map(this.spinners,function(n){if(i.isElement(t)?n.element==t:e(n.element).is(t))return n.element})).each(e.proxy(function(e,t){this.removeByElement(t)},this))},removeByElement:function(t){var n=this.get(t)[0];n&&(n.remove(),this.spinners=e.grep(this.spinners,function(e){return e.element!=t}))},removeDetached:function(){e.each(this.spinners,e.proxy(function(e,t){t&&t.element&&!i.element.isAttached(t.element)&&this.remove(t.element)},this))}};e.extend(n,{create:function(t,n){if(t){var s=n||{},o=[];return i.isElement(t)?o.push(new r(t,s)):e(t).each(function(e,t){o.push(new r(t,s))}),o}}}),e.extend(n.prototype,{items:function(){return u.get(this.element)},play:function(){return e.each(this.items(),function(e,t){t.play()}),this},stop:function(){return e.each(this.items(),function(e,t){t.stop()}),this},pause:function(){return e.each(this.items(),function(e,t){t.pause()}),this},toggle:function(){return e.each(this.items(),function(e,t){t.toggle()}),this},center:function(){return e.each(this.items(),function(e,t){t.center()}),this},setOptions:function(t){return e.each(this.items(),function(e,n){n.setOptions(t)}),this},remove:function(){return u.remove(this.element),this}}),e.extend(r.prototype,{setOptions:function(t){this.options=e.extend({},this.options,t||{}),this.options.radii&&(t=this.options.radii,this.options.radius=Math.min(t[0],t[1]),this.options.height=Math.max(t[0],t[1])-this.options.radius),this.options.dashWidth&&(this.options.width=this.options.dashWidth),this.options.speed&&(this.options.duration=1e3*this.options.speed);var t=this._state,n=this._position;this._layout=null,this.build(),n&&n>=this.options.dashes-1&&(this._position=this.options.dashes-1);switch(t){case"playing":this.play();break;case"paused":case"stopped":this.drawPosition(this._position)}this._centered&&this.center()},remove:function(){this.canvas&&(this.pause(),e(this.canvas).remove(),this.ctx=this.canvas=null)},build:function(){this.remove();var t=this.getLayout().workspace.radius;return e(document.body).append(this.canvas=e("<canvas>").attr({width:2*t,height:2*t}).css({zoom:1})),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas[0]),this.ctx=this.canvas[0].getContext("2d"),this.ctx.globalAlpha=this.options.opacity,e(this.element).append(this.canvas),this.ctx.translate(t,t),this},drawPosition:function(e){var n=this.getLayout().workspace,e=i.scroll(n.opacities,-1*e),r=n.radius,n=this.options.dashes,s=t(360/n);this.ctx.clearRect(-1*r,-1*r,2*r,2*r);for(r=0;r<n;r++)this.drawDash(e[r],this.options.color),this.ctx.rotate(s)},drawDash:function(e,t){this.ctx.fillStyle=o.hex2fill(t,e);var n=this.getLayout(),r=n.workspace.radius,i=n.dash.position,n=n.dash.dimensions;s.drawRoundedRectangle(this.ctx,{top:i.top-r,left:i.left-r,width:n.width,height:n.height,radius:Math.min(n.height,n.width)/2})},_nextPosition:function(){var t=this.options.rotation/this.options.dashes;this.nextPosition(),this._playTimer=window.setTimeout(e.proxy(this._nextPosition,this),t)},nextPosition:function(){this._position==this.options.dashes-1&&(this._position=-1),this._position++,this.drawPosition(this._position)},play:function(){if("playing"!=this._state){this._state="playing";var t=this.options.rotation/this.options.dashes;return this._playTimer=window.setTimeout(e.proxy(this._nextPosition,this),t),this}},pause:function(){if("paused"!=this._state)return this._pause(),this._state="paused",this},_pause:function(){this._playTimer&&(window.clearTimeout(this._playTimer),this._playTimer=null)},stop:function(){if("stopped"!=this._state)return this._pause(),this._position=0,this.drawPosition(0),this._state="stopped",this},toggle:function(){return this["playing"==this._state?"pause":"play"](),this},getLayout:function(){if(this._layout)return this._layout;for(var e=this.options,t=e.dashes,n=e.width,r=e.radius,i=e.radius+e.height,s=Math.max(n,i),s=Math.ceil(Math.max(s,Math.sqrt(i*i+n/2*(n/2)))),e=s+=e.padding,o=1/t,u=[],a=0;a<t;a++)u.push((a+1)*o);return this._layout=t={workspace:{radius:e,opacities:u},dash:{position:{top:s-i,left:s-n/2},dimensions:{width:n,height:i-r}}}},center:function(){var t=2*this.getLayout().workspace.radius;e(this.element.parentNode).css({position:"relative"}),e(this.element).css({position:"absolute",height:t+"px",width:t+"px",top:"50%",left:"50%",marginLeft:-0.5*t+"px",marginTop:-0.5*t+"px"}),this._centered=!0}}),Spinners.init(),Spinners.enabled||(n.create=function(){return[]})})(jQuery);