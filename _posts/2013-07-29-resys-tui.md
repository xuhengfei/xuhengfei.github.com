---
layout: blog
title: 推荐系统之推荐前台设计
category: tech
excerpt: 推荐前台对内整合数据与业务，对外开放推荐API，起到承接作用
---

推荐前台对外暴露推荐API，给业务方调用

推荐前台在架构上支持的推荐维度有以下几种：  
Item商品  Shop店铺  User用户  CPV商品类目属性  SPU商品标类  
<img src="/assets/images/articles/2013-07-29-resys-tui-1.png" width="500px"/>  
基于这几个维度的推荐，实际的推荐种类将是一个叉乘关系。  
当然对于不在这些维度范围的推荐，如有必要可进行扩展。  

推荐前台内部的请求处理过程如下图所示：  
<img src="/assets/images/articles/2013-07-29-resys-tui-2.png"/>  

图中的箭头方向，表示一个请求的流转方向。  
步骤一：  
推荐前台对外提供HTTP与HSF两种类型的请求  
对外提供的推荐API主要有两种  
1.通过场景id来定义推荐类型  
请求中携带了场景id后，则无需其他参数。所有的参数将通过后台系统来配置  
2.通过请求中拼装参数来进行推荐  
推荐系统内部的流转路径可以通过参数来进行拼装  
比如参数中可以声明此请求是一个商品->商品的一个推荐，推荐的数据源是哪个(Treasure数据)等等  

步骤二：  
HTTP请求或者HSF请求在此处进行会和。  
如果请求中携带了场景id，系统将会根据场景id去后台查询该请求响应的参数，包括一些分桶信息的计算。  

步骤三：    
获取到参数后，根据参数来控制后续步骤的流转。  
比如参数表明这个请求是商品->商品的推荐，那么就进入 “商品推荐”  步骤  

步骤四：  
根据参数信息，判定进入相应的业务场景处理模块进行处理  

步骤五：  
根据参数信息，判定进入相应的分桶数据中  

整个推荐前台的请求流转过程中，推荐前台很好的进行了分层。  
清晰的分层，能保证我们在承接了大量的业务场景位后，仍然能够思路清晰。系统的可维护性极佳。  
清晰的分层，也为我们的后台动态配置提供了基础。  
通过后台系统的配置，我们能够动态的对场景的执行步骤流向进行控制。也可以对场景的ABTest分桶进行配置。  
这种灵活的配置能够极大的提高效率。针对同类型的推荐业务，无需代码开发，通过后台动态配置即可立即上线。  

